import{r as c,j as e,i as u,c as g,R as b}from"./mentat-7931b194.js";const h=new Date,x=new Intl.DateTimeFormat("en-in",{dateStyle:"short"});function v(n,t,a){fetch("/commagenetcp/rfe",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:n,date:x.format(h),name:t,comments:a,status:"open",worker:"narendran.srinivasan"})}).then(r=>r.json()).then(r=>{setLocalRfeTable(s=>[...s,r])}).catch(r=>console.log(r))}function y(){const[n,t]=c.useState("RFE"),[a,r]=c.useState(""),[s,i]=c.useState(""),[d,l]=c.useState(()=>localStorage.getItem("localRfeTable")?JSON.parse(localStorage.getItem("localRfeTable")):[{}]);c.useEffect(()=>{fetch("/commagenetcp/login").then(o=>o.json()).then(o=>{r(o)}).catch(o=>console.log(o))},[]);function m(){document.getElementById("RFEform").style.top="-300%",t("RFE"),i("")}function f(){t(document.getElementById("requestType").value)}c.useEffect(()=>{localStorage.setItem("localRfeTable",JSON.stringify(d))},[d]);function j(){s!=""&&a!="logged out"&&(l(o=>[...o,{type:n,date:x.format(h),name:a,comments:s,status:"open",worker:"narendran.srinivasan"}]),v(n,a,s),m(),window.location.reload())}function p(o){o.preventDefault()}return e.jsx(e.Fragment,{children:e.jsxs("form",{id:"RFEform",onSubmit:p,children:[e.jsx("button",{id:"closeForm",className:"btn btn-light",onClick:()=>m(),children:"X"}),e.jsx("br",{}),e.jsx("br",{}),e.jsxs("div",{className:"container",children:[e.jsx("div",{className:"row formColumn",children:e.jsxs("select",{id:"requestType",className:"form-select","aria-label":"Default select example",onChange:()=>f(),children:[e.jsx("option",{value:"RFE",children:"RFE"}),e.jsx("option",{value:"bug",children:"bug"})]})}),e.jsx("div",{className:"row formColumn",children:e.jsxs("div",{className:"input-group mb-3",children:[e.jsx("span",{className:"input-group-text",id:"basic-addon1",children:"@"}),e.jsx("input",{type:"text",className:"form-control",placeholder:"Username","aria-label":"Username","aria-describedby":"basic-addon1",value:a,onChange:o=>r(o.target.value),required:!0,disabled:!0})]})}),e.jsx("div",{className:"row formColumn",children:e.jsx("textarea",{className:"form-control",placeholder:"please add a description",id:"floatingTextarea",value:s,onChange:o=>i(o.target.value),style:{minHeight:"30vh"},required:!0})})]}),e.jsx("br",{}),e.jsx("div",{className:"text-center",children:e.jsx("button",{type:"submit",className:"btn btn-primary",onClick:()=>j(),children:"Submit"})})]})})}function N(n){fetch("/commagenetcp/rfe/"+n,{method:"DELETE"}).then(t=>t.json()).then(t=>{console.log(t)}).catch(t=>console.log(t)),window.location.reload()}function w(n){fetch("/commagenetcp/rfe/"+n.id,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:n.name,comments:n.comments,status:n.status,worker:n.worker})}).then(t=>t.json()).then(t=>{console.log(t)}).catch(t=>console.log(t))}function R({data:n}){const[t,a]=c.useState(()=>n==null?{id:"",type:"",name:"",date:"",comments:"",status:"",worker:""}:{...n});c.useEffect(()=>{a({...n})},[n]);function r(s,i){a({...t,[s]:i})}return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"container editordelete",children:[e.jsx("input",{type:"text",value:t.id,onChange:s=>r("id",s.target.value)}),e.jsx("br",{}),e.jsx("input",{type:"text",value:t.type,onChange:s=>r("type",s.target.value)}),e.jsx("br",{}),e.jsx("input",{type:"text",value:t.date,onChange:s=>r("date",s.target.value)}),e.jsx("br",{}),e.jsx("input",{type:"text",value:t.name,onChange:s=>r("name",s.target.value)}),e.jsx("br",{}),e.jsx("textarea",{className:"form-control",placeholder:"user comments",id:"floatingTextarea",value:t.comments,onChange:s=>r("comments",s.target.value)}),e.jsx("input",{id:"edited_status",type:"text",value:t.status,onChange:s=>r("status",s.target.value)}),e.jsx("br",{}),e.jsx("input",{id:"edited_worker",type:"text",value:t.worker,onChange:s=>r("worker",s.target.value)}),e.jsx("br",{}),e.jsx("button",{className:"btn btn-light",onClick:()=>w(t),children:"edit"}),e.jsx("button",{className:"btn btn-danger",onClick:()=>N(t.id),children:"delete"})]})})}function E(){return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"row rfeTable",children:[e.jsx("div",{className:"rfeTitles col-1",children:"ID"}),e.jsx("div",{className:"rfeTitles col-1",children:"opened on"}),e.jsx("div",{className:"rfeTitles col-2",children:"requested by"}),e.jsx("div",{className:"rfeTitles col-3",children:"description"}),e.jsx("div",{className:"rfeTitles col-2",children:"status"}),e.jsx("div",{className:"rfeTitles col-2",children:"worked on by"})]})})}function T({item:n,onRowClick:t}){const[a,r]=c.useState(!1),s=()=>{r(!a),t(n)};return e.jsxs("div",{className:`row rfeTable rfeEntryRow ${a?"expanded":"collapsed"}`,onClick:s,style:{cursor:"pointer"},children:[e.jsxs("div",{className:"rfeEntries col-1",children:[n.type,n.id]}),e.jsx("div",{className:"rfeEntries col-1",children:n.date}),e.jsx("div",{className:"rfeEntries col-2",children:n.name}),e.jsx("div",{className:"rfeEntries col-3",style:{textAlign:"left",whiteSpace:a?"pre-wrap":"nowrap",overflow:a?"auto":"hidden",textOverflow:a?"unset":"ellipsis"},children:n.comments}),e.jsx("div",{className:"rfeEntries col-2",children:n.status}),e.jsx("div",{className:"rfeEntries col-2",children:n.worker})]})}function C({rfeTable:n,onRowClick:t}){return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"container",children:[e.jsx(E,{}),e.jsx("br",{}),n.length===0&&e.jsx("center",{children:e.jsx("p",{children:"empty"})}),n.map(a=>e.jsx(T,{item:a,onRowClick:t},a.id))]})})}function S(){const[n,t]=c.useState([]),[a,r]=c.useState(!1),[s,i]=c.useState(null),d=l=>{i(l)};return c.useEffect(()=>{fetch("/commagenetcp/isnarendran").then(l=>l.json()).then(l=>{r(l.display==="True")}).catch(l=>console.log(l)),fetch("/commagenetcp/rfe").then(l=>l.json()).then(l=>{t(l),console.log("pulled rfe records")}).catch(l=>console.log(l))},[]),e.jsxs(e.Fragment,{children:[e.jsx(y,{}),e.jsx(C,{rfeTable:n,onRowClick:d}),e.jsx("br",{}),e.jsx("center",{children:e.jsxs("p",{children:[n.length," requests opened"]})}),e.jsx("br",{}),a&&e.jsx(R,{data:s})]})}function k(){document.getElementById("RFEform").style.top="10%"}function F(){return e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("div",{className:"wrapper",children:e.jsx("a",{href:"/tcpdump/",target:"_blank",rel:"noopener noreferrer",children:e.jsx("img",{src:u,alt:"mentat to reedirect to main page",style:{width:"5vw"}})})}),e.jsx("br",{}),e.jsxs("div",{id:"rfeContainer",className:"OPandF",children:[e.jsxs("div",{children:[e.jsx("h3",{children:"RFE / report bug"}),e.jsx("button",{id:"addRFE",className:"btn btn-light",onClick:()=>k(),children:"add item"})]}),e.jsx("br",{}),e.jsx("br",{}),e.jsx(S,{})]}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("center",{children:e.jsx("div",{className:"wrapperEnd",children:e.jsx("a",{href:"/tcpdump/",target:"_blank",rel:"noopener noreferrer",children:e.jsx("img",{src:u,alt:"",style:{width:"auto"}})})})})]})}g.createRoot(document.getElementById("rfePage")).render(e.jsx(b.StrictMode,{children:e.jsx(F,{})}));
